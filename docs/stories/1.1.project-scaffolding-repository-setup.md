# Story 1.1: Project Scaffolding and Repository Setup

## Status
Draft

## Story
**As a** DSI Product Owner,
**I want** a fully initialized AgentLab project repository with foundational development environment setup,
**so that** I can begin AI development projects with a robust, scalable foundation that supports BMAD Method automation and Claude Code integration.

## Acceptance Criteria

1. Repository is initialized with explicit directory structure using npm workspaces monorepo pattern
2. All foundational configuration files are created with pinned versions:
   - .gitignore (Node.js + Python template)
   - .nvmrc (Node.js 18.17.0)
   - .python-version (Python 3.11.5)
   - .env.example with all required environment variables
3. Development tooling is configured with specific versions:
   - ESLint 8.45.0+ with TypeScript rules
   - Prettier 3.0.0+ with standardized configuration
   - TypeScript 5.1.0+ with strict mode enabled
   - Husky pre-commit hooks for code quality
4. Initial README.md is created with:
   - Prerequisites (Docker 24.0+, Node.js 18.17.0, Python 3.11.5)
   - Quick start commands
   - Architecture overview
   - Development workflow
5. Git workflows are configured:
   - Branch protection rules for main
   - Initial commit with conventional commit format
   - Commit message standards documentation
   - PR template for code reviews
6. External service setup documentation is provided for:
   - Claude API setup process with security guidelines
   - Optional LLM provider setup (OpenAI, OLLAMA)
   - API key environment variables and credential security
7. Repository structure follows the specified monorepo pattern with apps/, packages/, docs/, infrastructure/, and scripts/ directories

## Tasks / Subtasks

- [ ] **Task 1: Initialize Repository Structure** (AC: 1, 7)
  - [ ] Create project directory and initialize git repository
  - [ ] Set up npm workspaces monorepo with specified directory structure
  - [ ] Create foundational directories: {apps/{web,api},packages/{types,ui,utils},docs,infrastructure,scripts}
  - [ ] Initialize workspace package.json files with correct dependencies

- [ ] **Task 2: Configure Development Environment Files** (AC: 2)
  - [ ] Create .gitignore with Node.js and Python template patterns
  - [ ] Set .nvmrc to Node.js 18.17.0
  - [ ] Set .python-version to Python 3.11.5
  - [ ] Create .env.example with Claude API key and optional LLM provider variables

- [ ] **Task 3: Setup Development Tooling** (AC: 3)
  - [ ] Configure ESLint 8.45.0+ with TypeScript rules and workspace configuration
  - [ ] Configure Prettier 3.0.0+ with standardized formatting rules
  - [ ] Setup TypeScript 5.1.0+ with strict mode in root and workspace configs
  - [ ] Install and configure Husky pre-commit hooks for linting and formatting

- [ ] **Task 4: Create Project Documentation** (AC: 4, 6)
  - [ ] Write comprehensive README.md with prerequisites and quick start
  - [ ] Document architecture overview based on containerized modular monolith
  - [ ] Create development workflow documentation
  - [ ] Create external service setup documentation with Claude API instructions
  - [ ] Document credential security guidelines and API key management

- [ ] **Task 5: Configure Git Workflows** (AC: 5)
  - [ ] Set up conventional commit message standards
  - [ ] Create PR template for code reviews
  - [ ] Document branch protection recommendations for main branch
  - [ ] Create initial commit with message: "feat: initial project scaffolding with monorepo structure"

## Dev Notes

### Previous Story Insights
This is the first story in Epic 1, so no previous story context available.

### Architecture Context
**Source:** [Source: architecture/project-structure.md#repository-organization]
- AgentLab uses npm workspaces monorepo structure for coordinated frontend/backend development
- Repository structure: apps/ (web, api), packages/ (types, ui, utils), docs/, infrastructure/, scripts/
- Root package.json manages workspaces with coordinated build, test, lint, and type-check scripts
- Inter-package dependencies: apps/web depends on packages/{types,ui,utils}, apps/api depends on packages/types

**Source:** [Source: architecture/tech-stack.md#technology-stack-table]
- Frontend: TypeScript 5.3+, Next.js 15.x, shadcn/ui, React Query + Zustand, Tailwind CSS 3.4+
- Backend: Python 3.12, FastAPI 0.115+, PostgreSQL 17.x with pgvector 0.8+, Redis 7.x
- Development: Vite 5.x+, Vitest + React Testing Library, pytest + pytest-asyncio, Playwright
- Infrastructure: docker-compose, GitHub Actions, Pino (Node.js) + structlog (Python) logging

**Source:** [Source: architecture/coding-standards.md#critical-fullstack-rules]
- Type Safety First: All data typed end-to-end from database to frontend
- Async/Await: Use async patterns consistently for all I/O operations
- Validation Everywhere: Validate data at API boundaries using Pydantic/Zod
- Test Coverage: Maintain >80% test coverage for business logic

**Source:** [Context7: FastAPI project structure documentation]
- FastAPI recommended structure: app/ directory with __init__.py, main.py, routers/, internal/
- Dockerfile and requirements.txt at project root for Docker builds
- Separate config.py module for Pydantic BaseSettings configuration

**Source:** [Context7: Next.js project initialization documentation]
- Use create-next-app with TypeScript, ESLint, Tailwind CSS, App Router options
- Configure tailwind.config.js template paths for app/, pages/, components/ directories
- Interactive prompts guide through project setup options

**Source:** [Context7: Docker Compose multi-service setup documentation]
- Multi-service YAML configuration for web, database (PostgreSQL), and Redis services
- Service dependencies and port mapping configuration
- Volume mounting for development and data persistence

### File Locations
**Source:** [Source: architecture/project-structure.md#workspace-configuration]
- Root package.json: Define workspaces, scripts for dev, build, test, lint, type-check
- apps/web/package.json: Next.js frontend dependencies and scripts
- apps/api/pyproject.toml: FastAPI backend Python dependencies
- packages/*/package.json: Shared package configurations with inter-dependencies

### Technical Constraints
**Source:** [Source: architecture/tech-stack.md#technology-stack-table]
- Node.js version: 18.17.0 (specified in .nvmrc)
- Python version: 3.11.5 (specified in .python-version)
- ESLint version: 8.45.0+ with TypeScript rules
- Prettier version: 3.0.0+ with standardized configuration
- TypeScript version: 5.1.0+ with strict mode enabled

### External Service Requirements
**Source:** [Source: epics/epic-1-foundation-infrastructure.md#external-service-setup-documentation]
- Claude API: Account creation at console.anthropic.com, API key generation, rate limits monitoring
- Optional OpenAI API: Fallback provider setup
- Optional OLLAMA: Local installation for offline development
- Environment variables: CLAUDE_API_KEY (required), OPENAI_API_KEY (optional), OLLAMA_HOST (optional)
- Security: Never commit API keys, use .env files, rotate keys quarterly

### Testing
**Source:** [Source: architecture/testing-strategy.md#test-organization]
- Frontend testing location: apps/web/src/__tests__/ and component co-located __tests__/ directories
- Backend testing location: apps/api/tests/ with unit/, integration/, fixtures/ subdirectories
- Testing frameworks: Vitest for frontend, pytest with async support for backend
- Test coverage requirement: >80% for business logic, >90% for API endpoints
- Test file naming: *.test.tsx for components, test_*.py for backend services

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-29 | 1.0 | Initial story creation from Epic 1.1 requirements | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
claude-sonnet-4-20250514

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*